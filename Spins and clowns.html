<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Degenerate Clowns Slot Machine</title>
<style>
  body {
    background: url('https://i.imgur.com/oXURWxC.png') no-repeat center center fixed;
    background-size: cover;
    font-family: 'Comic Sans MS', cursive;
    text-align: center;
    color: gold;
    overflow-x: hidden;
  }

  #slot-machine {
    display: inline-block;
    position: relative;
    margin-top: 40px;
    transform: scale(1.5);
  }

  #reels {
    display: grid;
    grid-template-columns: repeat(3, 120px);
    grid-template-rows: repeat(3, 120px);
    gap: 8px;
    justify-content: center;
    align-items: center;
    background: rgba(0,0,0,0.6);
    padding: 20px;
    border: 4px solid gold;
    border-radius: 12px;
    position: relative;
  }

  .symbol {
    width: 100%;
    height: 100%;
    border-radius: 8px;
  }

  #spin-button {
    margin-top: 20px;
    font-size: 24px;
    background: gold;
    color: black;
    padding: 10px 30px;
    border-radius: 10px;
    cursor: pointer;
  }

  #popup {
    position: absolute;
    top: 40%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: none;
    z-index: 20;
  }

  #popup img {
    width: 300px;
    border: 5px solid gold;
    border-radius: 15px;
    animation: shake 1s infinite alternate;
  }

  #golden-line {
    position: absolute;
    height: 5px;
    background: linear-gradient(to right, gold, orange, red);
    display: none;
    z-index: 5;
  }

  @keyframes shake {
    0% { transform: rotate(0deg); }
    50% { transform: rotate(2deg); }
    100% { transform: rotate(-2deg); }
  }

  @keyframes bgShake {
    0% { transform: translate(0px, 0px); }
    25% { transform: translate(5px, -5px); }
    50% { transform: translate(-5px, 5px); }
    75% { transform: translate(5px, 5px); }
    100% { transform: translate(0px, 0px); }
  }

  #payout-table {
    position: absolute;
    top: 100px;
    left: 50px;
    background: rgba(0,0,0,0.6);
    border: 2px solid gold;
    padding: 10px;
    border-radius: 8px;
  }

  #volume-control {
    margin-top: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    color: white;
    font-weight: bold;
  }

  #volume-slider {
    width: 200px;
  }

  @keyframes spinReel {
    0% { transform: translateY(0); }
    100% { transform: translateY(360px); }
  }
</style>
</head>
<body>

<div id="slot-machine">
  <div id="reels">
    <img class="symbol" id="s0">
    <img class="symbol" id="s1">
    <img class="symbol" id="s2">
    <img class="symbol" id="s3">
    <img class="symbol" id="s4">
    <img class="symbol" id="s5">
    <img class="symbol" id="s6">
    <img class="symbol" id="s7">
    <img class="symbol" id="s8">
  </div>
  <button id="spin-button">SPIN</button>

  <div id="volume-control">
    <label for="volume-slider">ðŸ”Š Volume:</label>
    <input type="range" id="volume-slider" min="0" max="100" value="50">
  </div>

  <div id="popup"><img id="popup-img" src=""></div>
  <div id="golden-line"></div>
</div>

<div id="payout-table">
  <h3>Payout Table</h3>
  <p>3 Clowns = Small Win</p>
  <p>3 Tanks = Medium Win</p>
  <p>3 Wilds = Big Win</p>
  <p>Jackpot = Every 10th Spin</p>
</div>

<script>
const symbols = [
  "https://i.imgur.com/KUfSTMv.jpeg",
  "https://i.imgur.com/QTjoPgM.jpeg",
  "https://i.imgur.com/JiEvroq.jpeg",
  "https://i.imgur.com/ZPZRtFw.png",
  "https://i.imgur.com/7F4eSHJ.png",
  "https://bashof.org/wp-content/uploads/2023/11/OJ_Simpson_1987-e1489501934717.jpg",
  "https://i.imgur.com/Iv46jAQ.png"
];

const reels = Array.from(document.querySelectorAll('.symbol'));
const spinButton = document.getElementById('spin-button');
const popup = document.getElementById('popup');
const popupImg = document.getElementById('popup-img');
const goldenLine = document.getElementById('golden-line');
const volumeSlider = document.getElementById('volume-slider');

let spinCount = 0;
let volumeLevel = 0.5;

let spinSound = new Audio('spin.mp3');
spinSound.loop = false;

let jackpotSounds = [
  new Audio('jackpot.mp3'),
  new Audio('jackpot2.mp3'),
  new Audio('jackpot3.mp3'),
  new Audio('jackpot4.mp3'),
  new Audio('jackpot5.mp3')
];

let isJackpotPlaying = false;
let spinning = false;

function updateVolume() {
  volumeLevel = volumeSlider.value / 100;
  spinSound.volume = volumeLevel;
  jackpotSounds.forEach(s => s.volume = volumeLevel);
}

function muteSpinDuringJackpot(active) {
  spinSound.volume = active ? 0 : volumeLevel;
}

function playRandomJackpotSound() {
  muteSpinDuringJackpot(true);
  const rand = jackpotSounds[Math.floor(Math.random() * jackpotSounds.length)];
  isJackpotPlaying = true;
  rand.play();
  rand.onended = () => {
    isJackpotPlaying = false;
    muteSpinDuringJackpot(false);
  };
}

function showPopup(imageSrc) {
  popupImg.src = imageSrc;
  popup.style.display = 'block';
  setTimeout(() => popup.style.display = 'none', 3000);
}

function animateGoldenLine() {
  goldenLine.style.display = 'block';
  goldenLine.style.width = '300px';
  goldenLine.style.top = '180px';
  goldenLine.style.left = '50%';
  goldenLine.style.transform = 'translateX(-50%)';
  setTimeout(() => goldenLine.style.display = 'none', 2000);
}

function spinReels() {
  if (spinning) return;
  spinning = true;

  spinCount++;
  if (!isJackpotPlaying) {
    spinSound.currentTime = 0;
    spinSound.play().catch(() => {});
  }

  reels.forEach((r, i) => {
    r.style.animation = "spinReel 0.8s ease-out";
    setTimeout(() => r.style.animation = "", 800);
  });

  setTimeout(() => {
    for (let i = 0; i < 9; i++) {
      let randomIndex = Math.floor(Math.random() * symbols.length);
      reels[i].src = symbols[randomIndex];
    }

    if (spinCount % 10 === 0) {
      playRandomJackpotSound();
      document.body.style.animation = 'bgShake 1s infinite';
      showPopup('https://i.imgur.com/AmC9sQo.png');
      setTimeout(() => document.body.style.animation = '', 4000);
    } else if (spinCount % 5 === 0) {
      showPopup('https://i.imgur.com/DV24Tzr.jpeg');
      animateGoldenLine();
    }
    spinning = false;
  }, 900);
}

spinButton.addEventListener('click', spinReels);
volumeSlider.addEventListener('input', updateVolume);
updateVolume();
</script>

</body>
</html>
